# Creating an updated server file with the necessary changes based on the user's request.
updated_code = """
// ==============================
// à¹€à¸£à¸µà¸¢à¸à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ Module à¸—à¸µà¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™
// ==============================
const express = require("express");
const http = require("http");
const { Server } = require("socket.io");
const cors = require("cors");

// ==============================
// à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Express à¹à¸¥à¸° HTTP Server
// ==============================
const app = express();
const server = http.createServer(app);

// ==============================
// à¸à¸³à¸«à¸™à¸”à¹ƒà¸«à¹‰ Socket.IO à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸‚à¹‰à¸²à¸¡ origin à¹„à¸”à¹‰
// à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: à¹ƒà¸™ production à¸„à¸§à¸£à¸£à¸°à¸šà¸¸ origin à¸ˆà¸£à¸´à¸‡à¹à¸—à¸™ *
// ==============================
const io = new Server(server, {
  cors: {
    origin: "*",
    methods: ["GET", "POST"],
  },
});

// ==============================
// à¸•à¸±à¸§à¹à¸›à¸£à¹€à¸à¹‡à¸šà¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸—à¸µà¹ˆà¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­
// à¹‚à¸”à¸¢à¹ƒà¸Šà¹‰ socket.id à¹€à¸›à¹‡à¸™ key à¹à¸¥à¸° username à¹€à¸›à¹‡à¸™ value
// ==============================
const connectedUsers = {};

// ==============================
// à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ (connect)
// ==============================
io.on("connection", (socket) => {
  console.log("ðŸ”Œ New client connected:", socket.id);

  /**
   * à¸£à¸±à¸šà¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸‚à¹‰à¸²à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ whiteboard
   * à¹à¸¥à¸°à¸ªà¹ˆà¸‡à¸­à¸±à¸›à¹€à¸”à¸•à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹ƒà¸«à¹‰à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸—à¸¸à¸à¸„à¸™
   */
  socket.on('join', (data) => {
    connectedUsers[socket.id] = data.username; // à¹€à¸à¹‡à¸šà¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹ƒà¸™ connectedUsers
    io.emit('userList', Object.values(connectedUsers)); // à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ userList à¹„à¸›à¸¢à¸±à¸‡ client à¸—à¸¸à¸à¸•à¸±à¸§
  });

  /**
   * à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸§à¸²à¸”à¸ˆà¸²à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
   * à¹à¸¥à¹‰à¸§à¸ªà¹ˆà¸‡à¸•à¹ˆà¸­à¹„à¸›à¸¢à¸±à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸„à¸™à¸­à¸·à¹ˆà¸™ (à¹„à¸¡à¹ˆà¸£à¸§à¸¡à¸•à¸±à¸§à¹€à¸­à¸‡)
   */
  socket.on("draw", (data) => {
    socket.broadcast.emit("draw", data);
  });

  /**
   * à¸£à¸±à¸šà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸¥à¹‰à¸²à¸‡à¸à¸£à¸°à¸”à¸²à¸™à¸ˆà¸²à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
   * à¹à¸¥à¹‰à¸§à¸à¸£à¸°à¸ˆà¸²à¸¢à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¹„à¸›à¸¢à¸±à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸„à¸™à¸­à¸·à¹ˆà¸™
   * 
   * à¸„à¸³à¸ªà¸±à¹ˆà¸‡ | à¸ªà¹ˆà¸‡à¸–à¸¶à¸‡à¹ƒà¸„à¸£à¸šà¹‰à¸²à¸‡
      socket.emit(...) | à¸ªà¹ˆà¸‡à¸–à¸¶à¸‡à¹€à¸‰à¸žà¸²à¸°à¸•à¸±à¸§à¹€à¸­à¸‡
      socket.broadcast.emit(...) | à¸ªà¹ˆà¸‡à¸–à¸¶à¸‡à¸—à¸¸à¸à¸„à¸™ à¸¢à¸à¹€à¸§à¹‰à¸™à¸•à¸±à¸§à¹€à¸­à¸‡
      io.emit(...) | à¸ªà¹ˆà¸‡à¸–à¸¶à¸‡ à¸—à¸¸à¸à¸„à¸™
   * 
   * 
   */
  socket.on("clear", () => {
    io.emit("clear");
  });

  /**
   * à¹€à¸¡à¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸•à¸±à¸”à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ (disconnect)
   * à¸¥à¸šà¸Šà¸·à¹ˆà¸­à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ à¹à¸¥à¸°à¸­à¸±à¸›à¹€à¸”à¸•à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸—à¸¸à¸à¸„à¸™
   */
  socket.on("disconnect", () => {
    const username = connectedUsers[socket.id];
    console.log(`âŒ ${username || "Unknown"} disconnected`);
    delete connectedUsers[socket.id];
    io.emit("userList", Object.values(connectedUsers)); // à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ userList à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸•à¸±à¸”à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­
  });
});

// ==============================
// à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ Server à¸šà¸™à¸žà¸­à¸£à¹Œà¸•à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”
// ==============================
const PORT = process.env.PORT || 3001;
server.listen(PORT, () => {
  console.log(`ðŸš€ Server is running on port ${PORT}`);
});
"""

# Saving the updated server file
file_path = "/mnt/data/updated_whiteboard_server.js"
with open(file_path, "w") as file:
    file.write(updated_code)

file_path
